<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CubeSat Atitude Determination: ADSCore/ADSCore.test.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CubeSat Atitude Determination
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_a_d_s_core_8test_8h.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ADSCore.test.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Test framework library for the ADScore module.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;mbed.h&quot;</code><br />
<code>#include &quot;<a class="el" href="_a_d_s_core_8h_source.html">ADSCore.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ADSCore.test.h:</div>
<div class="dyncontent">
<div class="center"><img src="_a_d_s_core_8test_8h__incl.png" border="0" usemap="#_a_d_s_core_2_a_d_s_core_8test_8h" alt=""/></div>
<map name="_a_d_s_core_2_a_d_s_core_8test_8h" id="_a_d_s_core_2_a_d_s_core_8test_8h">
<area shape="rect"  title="Test framework library for the ADScore module." alt="" coords="13,5,183,32"/>
<area shape="rect"  title=" " alt="" coords="5,229,71,256"/>
<area shape="rect"  href="_a_d_s_core_8h.html" title=" " alt="" coords="204,80,291,107"/>
<area shape="rect"  href="_matrix_8h.html" title=" " alt="" coords="359,229,429,256"/>
<area shape="rect"  href="_astro_lib_8h.html" title=" " alt="" coords="492,229,573,256"/>
<area shape="rect"  href="_estimators_8h.html" title=" " alt="" coords="326,155,422,181"/>
<area shape="rect"  href="_filters_8h.html" title=" " alt="" coords="446,155,515,181"/>
<area shape="rect"  href="_m_p_u9150_8h.html" title=" " alt="" coords="161,155,251,181"/>
<area shape="rect"  href="_sun_sensor_8h.html" title=" " alt="" coords="39,155,136,181"/>
<area shape="rect"  title=" " alt="" coords="474,304,533,331"/>
<area shape="rect"  title=" " alt="" coords="366,304,422,331"/>
<area shape="rect"  href="_m_p_u9150__registers_8h_source.html" title=" " alt="" coords="133,229,279,256"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="_a_d_s_core_8test_8h__dep__incl.png" border="0" usemap="#_a_d_s_core_2_a_d_s_core_8test_8hdep" alt=""/></div>
<map name="_a_d_s_core_2_a_d_s_core_8test_8hdep" id="_a_d_s_core_2_a_d_s_core_8test_8hdep">
<area shape="rect"  title="Test framework library for the ADScore module." alt="" coords="13,5,183,32"/>
<area shape="rect"  href="_a_d_s_core_8test_8cpp.html" title="Implements ADSCore.test.h." alt="" coords="5,80,191,107"/>
</map>
</div>
</div>
<p><a href="_a_d_s_core_8test_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:acd5744dbed62b27bfe383f160c4cbdd7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_a_d_s_core_8test_8h.html#acd5744dbed62b27bfe383f160c4cbdd7">ADSTest</a> ()</td></tr>
<tr class="memdesc:acd5744dbed62b27bfe383f160c4cbdd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Testing function for the <a class="el" href="class_a_d_s_core.html" title="Accesses, processes and filters the data from sensors to output an attitude quaternion of the Spacecr...">ADSCore</a> module.  <a href="#acd5744dbed62b27bfe383f160c4cbdd7">More...</a><br /></td></tr>
<tr class="separator:acd5744dbed62b27bfe383f160c4cbdd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Test framework library for the ADScore module. </p>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2019 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Remy CHATEL </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>GNU Public License v3.0</dd></dl>
<h1>Description</h1>
<p>This library provides a test function for the <a class="el" href="class_a_d_s_core.html" title="Accesses, processes and filters the data from sensors to output an attitude quaternion of the Spacecr...">ADSCore</a> module and also serves as an example program for the module.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="_a_d_s_core_8h.html">ADSCore.h</a></dd></dl>
<h1>Dependencies and data type</h1>
<p>This library depends on:</p><ul>
<li>the Mbed framework (<a href="https://www.mbed.com/en/">https://www.mbed.com/en/</a>)</li>
<li>&lt;std::cmath&gt; in order to perform cos, sin and sqrt operations.</li>
<li>&lt;std::vector&gt; for the matrix algebra</li>
<li>"Matrix.h" for matrices implementation</li>
<li>"Estimators.h" for the QuEst algorithm</li>
<li>"Filters.h" for the Kalman Filter</li>
<li>"AstroLib.h" for the reference vector models</li>
<li>"SunSensor.h" to access the Sun sensor</li>
<li>"MPU9150.h" to access the IMU</li>
</ul>
<dl class="section attention"><dt>Attention</dt><dd>This library uses float (32-bits) and not double (64-bits) to make best use of the Floating Point Unit of 32-bits microcontrollers.</dd></dl>
<h1>License</h1>
<p><b>(C) Copyright 2019 Remy CHATEL</b></p>
<p>Licensed Under GPL v3.0 License <a href="http://www.gnu.org/licenses/gpl-3.0.html">http://www.gnu.org/licenses/gpl-3.0.html</a></p>
<p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="acd5744dbed62b27bfe383f160c4cbdd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd5744dbed62b27bfe383f160c4cbdd7">&#9670;&nbsp;</a></span>ADSTest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ADSTest </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Testing function for the <a class="el" href="class_a_d_s_core.html" title="Accesses, processes and filters the data from sensors to output an attitude quaternion of the Spacecr...">ADSCore</a> module. </p>
<p>This method test the <a class="el" href="class_a_d_s_core.html" title="Accesses, processes and filters the data from sensors to output an attitude quaternion of the Spacecr...">ADSCore</a> module by fetching data from an IMU (through I2C) and a Sun sensor (3 analog channel), then it generates reference vector from models and estimate the attitude using the Quaternion Estimator algorithm. Finally, the output is filtered through a Kalman Filter to improve accuracy.</p>
<p>Runs in an infinite loop an print the results on the Serial port.</p>
<dl class="section return"><dt>Returns</dt><dd>1 if successful, 0 otherwise </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_a_d_s_core_8test_8h_acd5744dbed62b27bfe383f160c4cbdd7_cgraph.png" border="0" usemap="#_a_d_s_core_8test_8h_acd5744dbed62b27bfe383f160c4cbdd7_cgraph" alt=""/></div>
<map name="_a_d_s_core_8test_8h_acd5744dbed62b27bfe383f160c4cbdd7_cgraph" id="_a_d_s_core_8test_8h_acd5744dbed62b27bfe383f160c4cbdd7_cgraph">
<area shape="rect"  title="Testing function for the ADSCore module." alt="" coords="5,536,80,563"/>
<area shape="rect"  href="class_matrix.html#aa7bf588d788d601548a34030e59152b4" title="Creates a matrix of a given size filled with zeros." alt="" coords="403,232,502,259"/>
<area shape="rect"  href="class_a_d_s_core.html#a31fedf8f1ab60276f7d2255e9997a6e5" title="Initialize the sensor (IMU and Sun sensors) by calibrating the sensors and removing DC biases." alt="" coords="140,384,289,411"/>
<area shape="rect"  href="class_a_d_s_core.html#ae9189aaa3a9238d02716c3857473fbc6" title="Initialize the orbit model with the given date and orbital parameters." alt="" coords="150,435,279,461"/>
<area shape="rect"  href="class_a_d_s_core.html#a252473cfb3ee303c00a5c82a715fb4f9" title="Sets the variances of the sensors for the Quest algorithm." alt="" coords="147,485,283,512"/>
<area shape="rect"  href="class_a_d_s_core.html#a035baa9fa452899dee976bbcdc4430fd" title="Sets the Kalman filters variances, inertia matrices and initial position when there is no reaction wh..." alt="" coords="142,283,287,309"/>
<area shape="rect"  href="class_a_d_s_core.html#a65be8547feafaddb284e7e1c234606b8" title="Updates the attitude of the spacecraft by combining the output the different sensors and filtering th..." alt="" coords="153,333,276,360"/>
<area shape="rect"  href="class_a_d_s_core.html#a0420da419c3b9b6f9214cea9dc1c2d86" title="Gets the predicted atitude quaternion." alt="" coords="159,536,271,563"/>
<area shape="rect"  href="class_a_d_s_core.html#aad463c8d5859acf365420f70bbc7dd9b" title="Gets the predicted angular rates (rad/s)" alt="" coords="157,587,272,613"/>
<area shape="rect"  href="class_a_d_s_core.html#a3d41ec955dc487ee14e5fc8f7416e9ba" title="Gets the measured angular rates (deg/s)" alt="" coords="149,637,280,664"/>
<area shape="rect"  href="class_a_d_s_core.html#ac6378f263f7afafaf050701789cfd45b" title="Gets the measurements in the body frame of the n&#45;th sensor." alt="" coords="128,688,301,715"/>
<area shape="rect"  href="class_a_d_s_core.html#a303d9bc866c2a00ffc199b06e35027bf" title="Gets the measurements in the ECI frame of the n&#45;th sensor." alt="" coords="133,739,297,765"/>
<area shape="rect"  href="class_matrix.html#ad30cb5c3b09e8d54ddc93077db1833e9" title="Converts a rotation quaternion in Euler angles (3&#45;2&#45;1 convention)" alt="" coords="151,789,278,816"/>
<area shape="rect"  href="class_matrix.html#ad0c96cdea0d2ae3403653ca90aa70796" title="Transposes Matrix, return new Object." alt="" coords="824,789,951,816"/>
<area shape="rect"  href="class_m_p_u9150.html#a02c85a898779b6e333324e51a29827c7" title="Initialize the IMU (acc, gyr and mag)" alt="" coords="610,195,737,221"/>
<area shape="rect"  href="class_m_p_u9150.html#ae45ec6ca0eddd351ff0c8e52b5dec874" title="Method to recalibrate the IMU by removing the DC part." alt="" coords="367,333,538,360"/>
<area shape="rect"  href="class_m_p_u9150.html#a4f77f4c880167a1f05e6dafe3bf078e2" title="Allow the user to manually set the avg bias for the acceleration." alt="" coords="378,384,527,411"/>
<area shape="rect"  href="class_m_p_u9150.html#a19af7b6ee08eb2a00dcc79a6d8f0e149" title="Allow the user to manually set the avg bias for the magnetic field." alt="" coords="377,435,528,461"/>
<area shape="rect"  href="class_m_p_u9150.html#a7444c132c02372a0591d76dcf270ba6a" title="Read a byte from the I2C bus." alt="" coords="1036,132,1175,159"/>
<area shape="rect"  href="class_m_p_u9150.html#af5900057aa99c56213e132e7b086666d" title="Accelerometer and gyroscope self test; check calibration wrt factory settings." alt="" coords="792,144,983,171"/>
<area shape="rect"  href="class_m_p_u9150.html#a097d09c9338400038950dcacc256174e" title="Reset the MPU9150 to factory settings." alt="" coords="801,195,974,221"/>
<area shape="rect"  href="class_m_p_u9150.html#a7f97fe4a642fec56fc4f9c252da99574" title="Function which accumulates gyro and accelerometer data after device initialization...." alt="" coords="791,245,984,272"/>
<area shape="rect"  href="class_m_p_u9150.html#a5a3812e17d09e0926eb6959af23349a3" title="Initialize the accelerometer and the gyroscope." alt="" coords="807,43,968,69"/>
<area shape="rect"  href="class_m_p_u9150.html#ab735c1a815e7dba5fefdae4246022740" title="Initialize the magnetometer." alt="" coords="808,347,967,373"/>
<area shape="rect"  href="class_m_p_u9150.html#a5d83c3e2a264313aeb7f7d337410855c" title="Write a byte on the I2C bus." alt="" coords="1035,195,1176,221"/>
<area shape="rect"  href="class_m_p_u9150.html#a1c8b5eb1e99a4b2a0ae93a25ac7fe37b" title="Read multiple bytes from the I2C bus." alt="" coords="1032,347,1179,373"/>
<area shape="rect"  href="class_m_p_u9150.html#af8c6449ddb604e0cd30b8b466c57c051" title="Set the scaling of the accelerometer." alt="" coords="1039,5,1171,32"/>
<area shape="rect"  href="class_m_p_u9150.html#adcd8653cb5eee6666c34f18071379004" title="Set the scaling of the gyroscope." alt="" coords="1039,56,1172,83"/>
<area shape="rect"  href="class_m_p_u9150.html#a4e41653c04bfeda223746b742999e890" title="Calculates the value of the acceleration measured by the accelerometer in g." alt="" coords="604,365,743,392"/>
<area shape="rect"  href="class_m_p_u9150.html#aa60337a719d5171d35fcc2bfd3b30392" title="Calculates the value of the rate of turn measured by the gyroscope in deg/s." alt="" coords="607,441,740,468"/>
<area shape="rect"  href="class_m_p_u9150.html#a27005774a5516885611ef542cd57cec0" title="Calculates the value of the magnetic field measured by the magnetometer." alt="" coords="608,303,739,329"/>
<area shape="rect"  href="class_m_p_u9150.html#a551f476b566bf771b2fdb0e5a4144600" title="Fetches the accelerometer count from the IMU." alt="" coords="801,397,973,424"/>
<area shape="rect"  href="class_m_p_u9150.html#a39f593eb8c4be363e51417ed80bb5af2" title="Fetches the gyroscope count from the IMU." alt="" coords="804,448,971,475"/>
<area shape="rect"  href="class_m_p_u9150.html#a639f4804bae814c902922ccaf7c6eb9c" title="Fetches the magnetometer count from the IMU." alt="" coords="805,296,969,323"/>
<area shape="rect"  href="class_astro_lib_1_1_ground.html#a942dcbe4583d23699c0c762634be54d9" title="Sets the Julian Date member of the orbit." alt="" coords="349,485,556,512"/>
<area shape="rect"  href="class_astro_lib_1_1_ground.html#ac5f036f9e505d93425e0ba1b74a3f73e" title="Set the orbit parameters." alt="" coords="365,536,540,563"/>
<area shape="rect"  href="class_matrix.html#a88e35a3795f98d4cb63f01c647024996" title="Determines weather a Matrix is a Single Column or Row." alt="" coords="830,637,945,664"/>
<area shape="rect"  href="class_matrix.html#a12d963dd26d135bdd197cac54ae6bdaf" title="Compute the norm of an (n x 1) or (1 x n) vector." alt="" coords="405,713,500,740"/>
<area shape="rect"  href="class_matrix.html#ad7da400ed11b2e1a2d82bdadcb52c314" title="This function resizes the Matrix to fit new data or cropped it, operator &lt;&lt; can overwrite entire Matr..." alt="" coords="399,840,506,867"/>
<area shape="rect"  href="class_matrix.html#af698f665522164d4c3961120c94ff080" title="Returns the sum of every cell in the Matrix." alt="" coords="842,713,933,740"/>
<area shape="rect"  href="class_matrix.html#a8b75c0669091bb9ebc51b727f70f2d5f" title="Returns the dot Product of any two same leght vectors. In this case a vector is defined as a [1,..." alt="" coords="631,688,715,715"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_5cc06f621ec62b3fa43ef9d834e00fad.html">ADSCore</a></li><li class="navelem"><a class="el" href="_a_d_s_core_8test_8h.html">ADSCore.test.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
